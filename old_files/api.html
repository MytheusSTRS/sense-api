<!DOCTYPE html>
<html>
    <head>  
        <!-- Όλα τα αρχεία που χρειαζόμαστε online για να μην χρειαζόμαστε άλλα αρχεία -->
        <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
        <script src="moment.js"></script>

    </head>
    


    <body>
        <script>
            //GET για τα feelings (Λογικά θα βάλουμε selectors για την κάθε παράμετρο στην σελίδα ;;;)
            let feel_startdate = moment().subtract(1, 'months').format("YYYY-MM-DD");
            let feel_enddate = moment().format("YYYY-MM-DD");
            console.log(feel_startdate,feel_enddate);
            // let feel_coords = []; //Να βάλω μια deafult τιμή
            let feel_distance = 2000;
            let feel_limit = 1000;
            let feel_sort = 1;       //1 for descending, 1 for ascending
            let feel_city = "patras";
            
            $.ajax({        
                url: `https://api.sense.city/api/1.0/feelings?startdate=${feel_startdate}&enddate=${feel_enddate}&distance=${feel_distance}&limit=${feel_limit}&sort=${feel_sort}&city=${feel_city}&feeling=happy%7Cneutral%7Cangry`,

                method: 'GET',      
                success: function(feelData)
                {
                    let lenght = feelData.length;
                    // console.log(feelData);

                    for(let i=0;i<lenght;i++)
                {
                    // console.log(feelData[i].create_at);
                }

                }
                })

            </script>

            <script>                                //Παίζει τα κοινά variables (πχ. startdate,enddate,sort κτλ. να τα κάνουμε κοινά και στα δύο GET)
                let issue_startdate = moment().subtract(1, 'months').format("YYYY-MM-DD");
                let issue_enddate = moment().format("YYYY-MM-DD");
                let issue = "garbage%7Clighting%7Cplumbing%7Croad-constructor%7Cprotection-policy%7Cgreen%7Cenvironment"                      
                //Filter by issue garbage, lighting, plumbing, road-constructor , protection-policy , green , environment

                // let issue_bug_id = ""
                // let issue_mobile = ""
                // let issue_email = ""
                let issue_city = "patras"
                let issue_limit = 1000
                let issue_sort = 1                 //(1 for ascending, -1 for descending)
                // let issue_offset = ""
                // let issue_status_issue = ""         //(e.g., CONFIRMED, IN_PROGRESS, RESOLVED)
                // let issue_type = ""                 
                let issue_image_field = 1          //(1 to include, 0 to exclude)
                
                $.ajax({        
                url: `https://api.sense.city/api/1.0/issue?startdate=${issue_startdate}&enddate=${issue_enddate}&issue=${issue}&city=${issue_city}&limit=${issue_limit}&sort=${issue_sort}&image_field=${issue_image_field}`,

                method: 'GET',      
                success: function(issData)
                {
                    console.log(issData);}
                })
            </script>

    </body>


    </html>